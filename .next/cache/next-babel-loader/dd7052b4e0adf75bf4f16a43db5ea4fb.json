{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport moment from 'moment';\nimport { SubscriptionClient } from 'graphql-subscriptions-client';\nimport { DEV_WS_NETWORK_URL } from '@constants/global.constants';\nimport { onDaysChange as _onDaysChange, onAuctionsChange as _onAuctionsChange, onPreviousAuctionsChange as _onPreviousAuctionsChange, onAllAuctionsChange as _onAllAuctionsChange, onAuctionsChangeByIds as _onAuctionsChangeByIds, onDesignerByIds as _onDesignerByIds, onAuctionsHistoryByIds as _onAuctionsHistoryByIds, onNFTGlobalStats as _onNFTGlobalStats, onDigitalaxGarmentsCollectionChange as _onDigitalaxGarmentsCollectionChange, onDigitalaxMarketplaceOffers as _onDigitalaxMarketplaceOffers, onMarketplaceHistoryByIds as _onMarketplaceHistoryByIds, getAllDigitalaxGarmentsCollections as _getAllDigitalaxGarmentsCollections, onDigitalaxGarmentsCollectionChangeByIds as _onDigitalaxGarmentsCollectionChangeByIds, allDigitalaxMarketplaceOffers } from '@services/api/gql.subscriptions.ws.service';\n\nvar WSService = /*#__PURE__*/function () {\n  function WSService() {\n    _classCallCheck(this, WSService);\n\n    this.url = DEV_WS_NETWORK_URL;\n    this.client = null;\n  }\n\n  _createClass(WSService, [{\n    key: \"createClient\",\n    value: function createClient() {\n      this.client = new SubscriptionClient(this.url, {\n        reconnect: true,\n        lazy: true // only connect when there is a query\n\n      });\n      return this.client;\n    }\n  }, {\n    key: \"setUrl\",\n    value: function setUrl(url) {\n      this.url = url;\n\n      if (this.client) {\n        this.client.close(true);\n      }\n\n      this.createClient();\n    }\n  }, {\n    key: \"onDaysChange\",\n    value: function onDaysChange(countDays) {\n      var date = moment().subtract(countDays, 'day').format('YYYY-MM-DD');\n      return this.client.request({\n        query: _onDaysChange,\n        variables: {\n          date: date\n        }\n      });\n    }\n  }, {\n    key: \"onNFTGlobalStats\",\n    value: function onNFTGlobalStats() {\n      return this.client.request({\n        query: _onNFTGlobalStats\n      });\n    }\n  }, {\n    key: \"onAuctionsChange\",\n    value: function onAuctionsChange() {\n      return this.client.request({\n        query: _onAuctionsChange\n      });\n    }\n  }, {\n    key: \"onPreviousAuctionsChange\",\n    value: function onPreviousAuctionsChange() {\n      return this.client.request({\n        query: _onPreviousAuctionsChange\n      });\n    }\n  }, {\n    key: \"onAllAuctionsChange\",\n    value: function onAllAuctionsChange() {\n      return this.client.request({\n        query: _onAllAuctionsChange\n      });\n    }\n  }, {\n    key: \"onAuctionsChangeByIds\",\n    value: function onAuctionsChangeByIds(ids) {\n      return this.client.request({\n        query: _onAuctionsChangeByIds,\n        variables: {\n          ids: ids\n        }\n      });\n    }\n  }, {\n    key: \"onDesignerByIds\",\n    value: function onDesignerByIds(ids) {\n      return this.client.request({\n        query: _onDesignerByIds,\n        variables: {\n          ids: ids\n        }\n      });\n    }\n  }, {\n    key: \"onAuctionsHistoryByIds\",\n    value: function onAuctionsHistoryByIds(ids) {\n      return this.client.request({\n        query: _onAuctionsHistoryByIds,\n        variables: {\n          ids: ids\n        }\n      });\n    }\n  }, {\n    key: \"onMarketplaceHistoryByIds\",\n    value: function onMarketplaceHistoryByIds(ids) {\n      return this.client.request({\n        query: _onMarketplaceHistoryByIds,\n        variables: {\n          ids: ids\n        }\n      });\n    }\n  }, {\n    key: \"onDigitalaxGarmentsCollectionChange\",\n    value: function onDigitalaxGarmentsCollectionChange(garmentAuctionNFTId) {\n      return this.client.request({\n        query: _onDigitalaxGarmentsCollectionChange,\n        variables: {\n          garmentAuctionNFTId: garmentAuctionNFTId\n        }\n      });\n    }\n  }, {\n    key: \"getAllDigitalaxGarmentsCollections\",\n    value: function getAllDigitalaxGarmentsCollections() {\n      return this.client.request({\n        query: _getAllDigitalaxGarmentsCollections\n      });\n    }\n  }, {\n    key: \"onDigitalaxMarketplaceOffers\",\n    value: function onDigitalaxMarketplaceOffers(ids) {\n      return this.client.request({\n        query: _onDigitalaxMarketplaceOffers,\n        variables: {\n          ids: ids\n        }\n      });\n    }\n  }, {\n    key: \"getAllDigitalaxMarketplaceOffers\",\n    value: function getAllDigitalaxMarketplaceOffers() {\n      return this.client.request({\n        query: allDigitalaxMarketplaceOffers\n      });\n    }\n  }, {\n    key: \"onDigitalaxGarmentsCollectionChangeByIds\",\n    value: function onDigitalaxGarmentsCollectionChangeByIds(ids) {\n      return this.client.request({\n        query: _onDigitalaxGarmentsCollectionChangeByIds,\n        variables: {\n          ids: ids\n        }\n      });\n    }\n  }]);\n\n  return WSService;\n}();\n\nexport default new WSService();","map":{"version":3,"names":["moment","SubscriptionClient","DEV_WS_NETWORK_URL","onDaysChange","onAuctionsChange","onPreviousAuctionsChange","onAllAuctionsChange","onAuctionsChangeByIds","onDesignerByIds","onAuctionsHistoryByIds","onNFTGlobalStats","onDigitalaxGarmentsCollectionChange","onDigitalaxMarketplaceOffers","onMarketplaceHistoryByIds","getAllDigitalaxGarmentsCollections","onDigitalaxGarmentsCollectionChangeByIds","allDigitalaxMarketplaceOffers","WSService","url","client","reconnect","lazy","close","createClient","countDays","date","subtract","format","request","query","variables","ids","garmentAuctionNFTId"],"sources":["/Volumes/Data/Work/Digitalax/PFPMint/src/services/api/ws.service.js"],"sourcesContent":["import moment from 'moment'\nimport { SubscriptionClient } from 'graphql-subscriptions-client'\nimport { DEV_WS_NETWORK_URL } from '@constants/global.constants'\nimport {\n  onDaysChange,\n  onAuctionsChange,\n  onPreviousAuctionsChange,\n  onAllAuctionsChange,\n  onAuctionsChangeByIds,\n  onDesignerByIds,\n  onAuctionsHistoryByIds,\n  onNFTGlobalStats,\n  onDigitalaxGarmentsCollectionChange,\n  onDigitalaxMarketplaceOffers,\n  onMarketplaceHistoryByIds,\n  getAllDigitalaxGarmentsCollections,\n  onDigitalaxGarmentsCollectionChangeByIds,\n  allDigitalaxMarketplaceOffers,\n} from '@services/api/gql.subscriptions.ws.service'\n\nclass WSService {\n  constructor() {\n    this.url = DEV_WS_NETWORK_URL\n    this.client = null\n  }\n\n  createClient() {\n    this.client = new SubscriptionClient(this.url, {\n      reconnect: true,\n      lazy: true, // only connect when there is a query\n    })\n    return this.client\n  }\n\n  setUrl(url) {\n    this.url = url\n    if (this.client) {\n      this.client.close(true)\n    }\n    this.createClient()\n  }\n\n  onDaysChange(countDays) {\n    const date = moment().subtract(countDays, 'day').format('YYYY-MM-DD')\n    return this.client.request({ query: onDaysChange, variables: { date } })\n  }\n\n  onNFTGlobalStats() {\n    return this.client.request({ query: onNFTGlobalStats })\n  }\n\n  onAuctionsChange() {\n    return this.client.request({ query: onAuctionsChange })\n  }\n\n  onPreviousAuctionsChange() {\n    return this.client.request({ query: onPreviousAuctionsChange })\n  }\n\n  onAllAuctionsChange() {\n    return this.client.request({ query: onAllAuctionsChange })\n  }\n\n  onAuctionsChangeByIds(ids) {\n    return this.client.request({\n      query: onAuctionsChangeByIds,\n      variables: { ids }\n    })\n  }\n\n  onDesignerByIds(ids) {\n    return this.client.request({ query: onDesignerByIds, variables: { ids } })\n  }\n\n  onAuctionsHistoryByIds(ids) {\n    return this.client.request({\n      query: onAuctionsHistoryByIds,\n      variables: { ids }\n    })\n  }\n\n  onMarketplaceHistoryByIds(ids) {\n    return this.client.request({\n      query: onMarketplaceHistoryByIds,\n      variables: { ids }\n    })\n  }\n\n  onDigitalaxGarmentsCollectionChange(garmentAuctionNFTId) {\n    return this.client.request({\n      query: onDigitalaxGarmentsCollectionChange,\n      variables: { garmentAuctionNFTId }\n    })\n  }\n\n  getAllDigitalaxGarmentsCollections() {\n    return this.client.request({\n      query: getAllDigitalaxGarmentsCollections,\n    })\n  }\n\n  onDigitalaxMarketplaceOffers(ids) {\n    return this.client.request({\n      query: onDigitalaxMarketplaceOffers,\n      variables: { ids },\n    })\n  }\n\n  getAllDigitalaxMarketplaceOffers() {\n    return this.client.request({\n      query: allDigitalaxMarketplaceOffers,\n    })\n  }\n\n  onDigitalaxGarmentsCollectionChangeByIds(ids) {\n    return this.client.request({\n      query: onDigitalaxGarmentsCollectionChangeByIds,\n      variables: { ids },\n    })\n  }\n}\n\nexport default new WSService()\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}