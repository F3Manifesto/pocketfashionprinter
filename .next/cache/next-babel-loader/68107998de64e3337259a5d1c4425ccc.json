{"ast":null,"code":"var _jsxFileName = \"/Volumes/Data/Work/Digitalax/PFPMint/src/components/QRCodeBounce/index.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/* eslint-disable no-bitwise */\nimport React, { memo, useEffect, useRef } from 'react';\nimport styles from './styles.module.scss';\nconst canvasWidth = 1000;\nconst canvasHeight = 1000;\nconst photoSize = 100;\nconst qrCodeImages = ['./images/homepage/qrCode.png', './images/homepage/qrCode.png', './images/homepage/qrCode.png', './images/homepage/qrCode.png'];\nconst initPositions = [{\n  x: 1,\n  y: 1,\n  dx: 1,\n  dy: -1\n}, {\n  x: 700,\n  y: 200,\n  dx: -1,\n  dy: 1\n}, {\n  x: 300,\n  y: 100,\n  dx: -1,\n  dy: -1\n}, {\n  x: 200,\n  y: 650,\n  dx: 1,\n  dy: 1\n}];\nconst qrCode = {\n  index: 0,\n  x: 0,\n  y: 0,\n  dx: 1,\n  dy: 1,\n  vx: 1.5,\n  vy: 1,\n\n  init(number) {\n    this.x = initPositions[number].x;\n    this.y = initPositions[number].y;\n    this.dx = initPositions[number].dx;\n    this.dy = initPositions[number].dy;\n    this.index = number;\n  },\n\n  draw(ctx, photoImg) {\n    if (photoImg) {\n      // console.log('photoImg: '.)\n      ctx.drawImage(photoImg, this.x, this.y, photoSize, photoSize);\n      ctx.da;\n    }\n  },\n\n  move(width, height) {\n    this.x += this.vx * this.dx;\n    this.y += this.vy * this.dy;\n\n    if (this.x <= 0 || this.x + photoSize >= width) {\n      this.dx *= -1;\n    }\n\n    if (this.y <= 0 || this.y + photoSize >= height) {\n      this.dy *= -1;\n    }\n  }\n\n};\n\nconst QRCodeBounce = () => {\n  const qrCodeList = Array(qrCodeImages.length).fill().map(() => _objectSpread({}, qrCode));\n  const canvasRef = useRef();\n  const raf = useRef();\n  useEffect(() => {\n    const photoImages = Array(qrCodeImages.length).fill().map(() => new Image(100, 100));\n    photoImages.map((item, index) => {\n      photoImages[index].src = qrCodeImages[index];\n    });\n    console.log('photoImages: ', photoImages);\n    const canvasObj = canvasRef.current;\n    const context = canvasObj ? canvasObj.getContext('2d') : null;\n\n    function draw() {\n      context.clearRect(0, 0, canvasObj.width, canvasObj.height);\n      qrCodeList.forEach((item, index) => {\n        qrCodeList[index].draw(context, photoImages[index]);\n        qrCodeList[index].move(canvasObj.width, canvasObj.height);\n      });\n      raf.current = window.requestAnimationFrame(draw);\n    }\n\n    function init() {\n      qrCodeList.forEach((item, index) => qrCodeList[index].init(index));\n      window.cancelAnimationFrame(raf.current);\n      raf.current = window.requestAnimationFrame(draw);\n    }\n\n    if (context) init();\n    return () => {\n      window.cancelAnimationFrame(raf.current);\n    };\n  }, []);\n  return __jsx(\"div\", {\n    className: styles.wrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }\n  }, __jsx(\"canvas\", {\n    width: canvasWidth,\n    height: canvasHeight,\n    ref: canvasRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default /*#__PURE__*/memo(QRCodeBounce);","map":{"version":3,"names":["React","memo","useEffect","useRef","styles","canvasWidth","canvasHeight","photoSize","qrCodeImages","initPositions","x","y","dx","dy","qrCode","index","vx","vy","init","number","draw","ctx","photoImg","drawImage","da","move","width","height","QRCodeBounce","qrCodeList","Array","length","fill","map","canvasRef","raf","photoImages","Image","item","src","console","log","canvasObj","current","context","getContext","clearRect","forEach","window","requestAnimationFrame","cancelAnimationFrame","wrapper"],"sources":["/Volumes/Data/Work/Digitalax/PFPMint/src/components/QRCodeBounce/index.js"],"sourcesContent":["/* eslint-disable no-bitwise */\nimport React, { memo, useEffect, useRef } from 'react'\nimport styles from './styles.module.scss'\n\nconst canvasWidth = 1000\nconst canvasHeight = 1000\nconst photoSize = 100\n\nconst qrCodeImages = [\n  './images/homepage/qrCode.png',\n  './images/homepage/qrCode.png',\n  './images/homepage/qrCode.png',\n  './images/homepage/qrCode.png',\n]\n\nconst initPositions = [\n  {x: 1, y: 1, dx: 1, dy: -1},\n  {x: 700, y: 200, dx: -1, dy: 1},\n  {x: 300, y: 100, dx: -1, dy: -1},\n  {x: 200, y: 650, dx: 1, dy: 1},\n]\n\nconst qrCode = {\n  index: 0,\n  x: 0,\n  y: 0,\n  dx: 1,\n  dy: 1,\n  vx: 1.5,\n  vy: 1,\n\n  init(number) {\n    this.x = initPositions[number].x\n    this.y = initPositions[number].y\n    this.dx = initPositions[number].dx\n    this.dy = initPositions[number].dy\n    this.index = number\n  },\n  draw(ctx, photoImg) {\n    if (photoImg) {\n      // console.log('photoImg: '.)\n      ctx.drawImage(photoImg, this.x, this.y, photoSize, photoSize)\n      ctx.da\n    }\n  },\n\n  move(width, height) {\n    this.x += this.vx * this.dx;\n    this.y += this.vy * this.dy;\n\n    if (this.x <= 0 || this.x + photoSize >= width) {\n      this.dx *= -1;\n    }\n    \n    if (this.y <= 0 || this.y + photoSize >= height) {\n      this.dy *= -1;\n    }\n  }\n}\n\nconst QRCodeBounce = () => {\n  const qrCodeList = Array(qrCodeImages.length)\n    .fill()\n    .map(() => ({ ...qrCode }))\n\n  const canvasRef = useRef()\n  const raf = useRef()\n\n  useEffect(() => {\n    const photoImages = Array(qrCodeImages.length)\n      .fill()\n      .map(() => new Image(100, 100))\n\n    photoImages.map((item, index) => {\n      photoImages[index].src = qrCodeImages[index]\n    })\n\n    console.log('photoImages: ', photoImages)\n\n    const canvasObj = canvasRef.current\n    const context = canvasObj ? canvasObj.getContext('2d') : null\n\n    function draw() {\n      context.clearRect(0, 0, canvasObj.width, canvasObj.height)\n\n      qrCodeList.forEach((item, index) => {\n        qrCodeList[index].draw(context, photoImages[index])\n        qrCodeList[index].move(canvasObj.width, canvasObj.height)\n      })\n      raf.current = window.requestAnimationFrame(draw)\n    }\n\n    function init() {\n      qrCodeList.forEach((item, index) => qrCodeList[index].init(index))\n      window.cancelAnimationFrame(raf.current)\n      raf.current = window.requestAnimationFrame(draw)\n    }\n\n    if (context) init()\n    return () => {\n      window.cancelAnimationFrame(raf.current)\n    }\n  }, [])\n\n  return (\n    <div className={styles.wrapper}>\n      <canvas width={canvasWidth} height={canvasHeight} ref={canvasRef} />\n    </div>\n  )\n}\n\nexport default memo(QRCodeBounce)\n"],"mappings":";;;;;;;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,IAAhB,EAAsBC,SAAtB,EAAiCC,MAAjC,QAA+C,OAA/C;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AAEA,MAAMC,WAAW,GAAG,IAApB;AACA,MAAMC,YAAY,GAAG,IAArB;AACA,MAAMC,SAAS,GAAG,GAAlB;AAEA,MAAMC,YAAY,GAAG,CACnB,8BADmB,EAEnB,8BAFmB,EAGnB,8BAHmB,EAInB,8BAJmB,CAArB;AAOA,MAAMC,aAAa,GAAG,CACpB;EAACC,CAAC,EAAE,CAAJ;EAAOC,CAAC,EAAE,CAAV;EAAaC,EAAE,EAAE,CAAjB;EAAoBC,EAAE,EAAE,CAAC;AAAzB,CADoB,EAEpB;EAACH,CAAC,EAAE,GAAJ;EAASC,CAAC,EAAE,GAAZ;EAAiBC,EAAE,EAAE,CAAC,CAAtB;EAAyBC,EAAE,EAAE;AAA7B,CAFoB,EAGpB;EAACH,CAAC,EAAE,GAAJ;EAASC,CAAC,EAAE,GAAZ;EAAiBC,EAAE,EAAE,CAAC,CAAtB;EAAyBC,EAAE,EAAE,CAAC;AAA9B,CAHoB,EAIpB;EAACH,CAAC,EAAE,GAAJ;EAASC,CAAC,EAAE,GAAZ;EAAiBC,EAAE,EAAE,CAArB;EAAwBC,EAAE,EAAE;AAA5B,CAJoB,CAAtB;AAOA,MAAMC,MAAM,GAAG;EACbC,KAAK,EAAE,CADM;EAEbL,CAAC,EAAE,CAFU;EAGbC,CAAC,EAAE,CAHU;EAIbC,EAAE,EAAE,CAJS;EAKbC,EAAE,EAAE,CALS;EAMbG,EAAE,EAAE,GANS;EAObC,EAAE,EAAE,CAPS;;EASbC,IAAI,CAACC,MAAD,EAAS;IACX,KAAKT,CAAL,GAASD,aAAa,CAACU,MAAD,CAAb,CAAsBT,CAA/B;IACA,KAAKC,CAAL,GAASF,aAAa,CAACU,MAAD,CAAb,CAAsBR,CAA/B;IACA,KAAKC,EAAL,GAAUH,aAAa,CAACU,MAAD,CAAb,CAAsBP,EAAhC;IACA,KAAKC,EAAL,GAAUJ,aAAa,CAACU,MAAD,CAAb,CAAsBN,EAAhC;IACA,KAAKE,KAAL,GAAaI,MAAb;EACD,CAfY;;EAgBbC,IAAI,CAACC,GAAD,EAAMC,QAAN,EAAgB;IAClB,IAAIA,QAAJ,EAAc;MACZ;MACAD,GAAG,CAACE,SAAJ,CAAcD,QAAd,EAAwB,KAAKZ,CAA7B,EAAgC,KAAKC,CAArC,EAAwCJ,SAAxC,EAAmDA,SAAnD;MACAc,GAAG,CAACG,EAAJ;IACD;EACF,CAtBY;;EAwBbC,IAAI,CAACC,KAAD,EAAQC,MAAR,EAAgB;IAClB,KAAKjB,CAAL,IAAU,KAAKM,EAAL,GAAU,KAAKJ,EAAzB;IACA,KAAKD,CAAL,IAAU,KAAKM,EAAL,GAAU,KAAKJ,EAAzB;;IAEA,IAAI,KAAKH,CAAL,IAAU,CAAV,IAAe,KAAKA,CAAL,GAASH,SAAT,IAAsBmB,KAAzC,EAAgD;MAC9C,KAAKd,EAAL,IAAW,CAAC,CAAZ;IACD;;IAED,IAAI,KAAKD,CAAL,IAAU,CAAV,IAAe,KAAKA,CAAL,GAASJ,SAAT,IAAsBoB,MAAzC,EAAiD;MAC/C,KAAKd,EAAL,IAAW,CAAC,CAAZ;IACD;EACF;;AAnCY,CAAf;;AAsCA,MAAMe,YAAY,GAAG,MAAM;EACzB,MAAMC,UAAU,GAAGC,KAAK,CAACtB,YAAY,CAACuB,MAAd,CAAL,CAChBC,IADgB,GAEhBC,GAFgB,CAEZ,wBAAYnB,MAAZ,CAFY,CAAnB;EAIA,MAAMoB,SAAS,GAAG/B,MAAM,EAAxB;EACA,MAAMgC,GAAG,GAAGhC,MAAM,EAAlB;EAEAD,SAAS,CAAC,MAAM;IACd,MAAMkC,WAAW,GAAGN,KAAK,CAACtB,YAAY,CAACuB,MAAd,CAAL,CACjBC,IADiB,GAEjBC,GAFiB,CAEb,MAAM,IAAII,KAAJ,CAAU,GAAV,EAAe,GAAf,CAFO,CAApB;IAIAD,WAAW,CAACH,GAAZ,CAAgB,CAACK,IAAD,EAAOvB,KAAP,KAAiB;MAC/BqB,WAAW,CAACrB,KAAD,CAAX,CAAmBwB,GAAnB,GAAyB/B,YAAY,CAACO,KAAD,CAArC;IACD,CAFD;IAIAyB,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BL,WAA7B;IAEA,MAAMM,SAAS,GAAGR,SAAS,CAACS,OAA5B;IACA,MAAMC,OAAO,GAAGF,SAAS,GAAGA,SAAS,CAACG,UAAV,CAAqB,IAArB,CAAH,GAAgC,IAAzD;;IAEA,SAASzB,IAAT,GAAgB;MACdwB,OAAO,CAACE,SAAR,CAAkB,CAAlB,EAAqB,CAArB,EAAwBJ,SAAS,CAAChB,KAAlC,EAAyCgB,SAAS,CAACf,MAAnD;MAEAE,UAAU,CAACkB,OAAX,CAAmB,CAACT,IAAD,EAAOvB,KAAP,KAAiB;QAClCc,UAAU,CAACd,KAAD,CAAV,CAAkBK,IAAlB,CAAuBwB,OAAvB,EAAgCR,WAAW,CAACrB,KAAD,CAA3C;QACAc,UAAU,CAACd,KAAD,CAAV,CAAkBU,IAAlB,CAAuBiB,SAAS,CAAChB,KAAjC,EAAwCgB,SAAS,CAACf,MAAlD;MACD,CAHD;MAIAQ,GAAG,CAACQ,OAAJ,GAAcK,MAAM,CAACC,qBAAP,CAA6B7B,IAA7B,CAAd;IACD;;IAED,SAASF,IAAT,GAAgB;MACdW,UAAU,CAACkB,OAAX,CAAmB,CAACT,IAAD,EAAOvB,KAAP,KAAiBc,UAAU,CAACd,KAAD,CAAV,CAAkBG,IAAlB,CAAuBH,KAAvB,CAApC;MACAiC,MAAM,CAACE,oBAAP,CAA4Bf,GAAG,CAACQ,OAAhC;MACAR,GAAG,CAACQ,OAAJ,GAAcK,MAAM,CAACC,qBAAP,CAA6B7B,IAA7B,CAAd;IACD;;IAED,IAAIwB,OAAJ,EAAa1B,IAAI;IACjB,OAAO,MAAM;MACX8B,MAAM,CAACE,oBAAP,CAA4Bf,GAAG,CAACQ,OAAhC;IACD,CAFD;EAGD,CAlCQ,EAkCN,EAlCM,CAAT;EAoCA,OACE;IAAK,SAAS,EAAEvC,MAAM,CAAC+C,OAAvB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACE;IAAQ,KAAK,EAAE9C,WAAf;IAA4B,MAAM,EAAEC,YAApC;IAAkD,GAAG,EAAE4B,SAAvD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADF,CADF;AAKD,CAjDD;;AAmDA,4BAAejC,IAAI,CAAC2B,YAAD,CAAnB"},"metadata":{},"sourceType":"module"}