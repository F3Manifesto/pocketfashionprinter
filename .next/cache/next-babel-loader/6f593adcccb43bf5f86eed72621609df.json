{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { useEffect, useState, useRef } from 'react';\nimport api from '@services/api/espa/api.service';\nimport { USERNAME_AVAILABLE } from '@constants/global.constants';\nexport function useSignMessage(account) {\n  _s();\n\n  var _useState = useState(null),\n      signMsg = _useState[0],\n      setSignMsg = _useState[1];\n\n  useEffect(function () {\n    api.fetchAuthToken(account).then(function (msg) {\n      return setSignMsg(msg);\n    });\n  }, [account]);\n  return signMsg;\n}\n\n_s(useSignMessage, \"tko5L3/Ewg/ootxFhKWyT1SrCkk=\");\n\nexport function useUserNameAvailable(username) {\n  _s2();\n\n  var _useState2 = useState(USERNAME_AVAILABLE),\n      isAvailable = _useState2[0],\n      setUserNameAvailable = _useState2[1];\n\n  var timer = useRef(null);\n  useEffect(function () {\n    if (username) {\n      if (timer.current) {\n        clearTimeout(timer.current);\n      }\n\n      timer.current = setTimeout(function () {\n        api.checkUserName(username).then(function (isAvailable) {\n          return setUserNameAvailable(isAvailable);\n        });\n      }, 1000);\n    }\n  }, [username]);\n  return isAvailable;\n}\n\n_s2(useUserNameAvailable, \"pZ2YHhZXizBFyRubqwwMWIGx2cA=\");\n\nexport function useNFTs(account) {\n  _s3();\n\n  var _useState3 = useState(null),\n      nfts = _useState3[0],\n      setNfts = _useState3[1];\n\n  useEffect(function () {\n    api.fetchNfts(account).then(function (data) {\n      var items = [];\n\n      if (data.digitalaxCollectors.length) {\n        items = data.digitalaxCollectors[0].parentsOwned;\n      }\n\n      var _iterator = _createForOfIteratorHelper(data.digitalaxGarments),\n          _step;\n\n      try {\n        var _loop = function _loop() {\n          var item = _step.value;\n\n          if (!items.find(function (el) {\n            return el.id === item.id;\n          })) {\n            items = [].concat(_toConsumableArray(items), [_objectSpread(_objectSpread({}, item), {}, {\n              isStaked: true\n            })]);\n          }\n        };\n\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          _loop();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      setNfts(items);\n    }).catch(function (e) {\n      return setNfts([]);\n    });\n  }, [account]);\n  return nfts;\n}\n\n_s3(useNFTs, \"rz+yzv/kAnn+brHc2PrMUNPdf9Y=\");\n\nexport function useProfile() {\n  _s4();\n\n  var _useState4 = useState(null),\n      user = _useState4[0],\n      setUser = _useState4[1];\n\n  useEffect(function () {\n    api.getProfile().then(function (data) {\n      return setUser(data);\n    });\n  }, []);\n  return user;\n}\n\n_s4(useProfile, \"5s2qRsV95gTJBmaaTh11GoxYeGE=\");\n\nexport function useMyIP() {\n  _s5();\n\n  var _useState5 = useState(null),\n      ip = _useState5[0],\n      setIp = _useState5[1];\n\n  useEffect(function () {\n    api.getMyIP().then(function (data) {\n      return setIp(data);\n    });\n  }, []);\n  return ip;\n}\n\n_s5(useMyIP, \"JoCp/ceV/aC0kV6jZdART4BWdGg=\");","map":{"version":3,"names":["useEffect","useState","useRef","api","USERNAME_AVAILABLE","useSignMessage","account","signMsg","setSignMsg","fetchAuthToken","then","msg","useUserNameAvailable","username","isAvailable","setUserNameAvailable","timer","current","clearTimeout","setTimeout","checkUserName","useNFTs","nfts","setNfts","fetchNfts","data","items","digitalaxCollectors","length","parentsOwned","digitalaxGarments","item","find","el","id","isStaked","catch","e","useProfile","user","setUser","getProfile","useMyIP","ip","setIp","getMyIP"],"sources":["/Volumes/Data/Work/Digitalax/PFPMint/src/hooks/espa/user.hooks.js"],"sourcesContent":["import { useEffect, useState, useRef } from 'react';\nimport api from '@services/api/espa/api.service';\nimport { USERNAME_AVAILABLE } from '@constants/global.constants'\n\nexport function useSignMessage(account) {\n  const [signMsg, setSignMsg] = useState(null);\n\n  useEffect(() => {\n    api.fetchAuthToken(account).then((msg) => setSignMsg(msg));\n  }, [account]);\n\n  return signMsg;\n}\n\nexport function useUserNameAvailable(username) {\n  const [isAvailable, setUserNameAvailable] = useState(USERNAME_AVAILABLE);\n  const timer = useRef(null);\n\n  useEffect(() => {\n    if (username) {\n      if (timer.current) {\n        clearTimeout(timer.current)\n      }\n\n      timer.current = setTimeout(() => {\n        api.checkUserName(username).then(isAvailable => setUserNameAvailable(isAvailable))\n      }, 1000)\n      \n    }\n  }, [username])\n\n  return isAvailable\n}\n\nexport function useNFTs(account) {\n  const [nfts, setNfts] = useState(null);\n\n  useEffect(() => {\n    api\n      .fetchNfts(account)\n      .then((data) => {\n        let items = [];\n        if (data.digitalaxCollectors.length) {\n          items = data.digitalaxCollectors[0].parentsOwned;\n        }\n        for (let item of data.digitalaxGarments) {\n          if (!items.find((el) => el.id === item.id)) {\n            items = [...items, { ...item, isStaked: true }];\n          }\n        }\n\n        setNfts(items);\n      })\n      .catch((e) => setNfts([]));\n  }, [account]);\n\n  return nfts;\n}\n\nexport function useProfile() {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    api.getProfile().then((data) => setUser(data));\n  }, []);\n\n  return user;\n}\n\nexport function useMyIP() {\n  const [ip, setIp] = useState(null);\n\n  useEffect(() => {\n    api.getMyIP().then((data) => setIp(data));\n  }, []);\n\n  return ip;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}